@page "/Bet"
<style>
    body {
        font-family: 'Lilita One', cursive;
    }
    .container {
        width: 50%;
        padding-top: 10%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    .gap-small {
        gap: 1%;
    }
    .max-width-100 {
        max-width: 100px;
    }
    .btn-left {
        border-radius: 0.25rem 0 0 0.25rem;
    }

    .btn-right {
        border-radius: 0 0.25rem 0.25rem 0;
    }

    .row-player {
        position: relative;
        padding: 1.5rem 0;
        margin-bottom: 0.5rem;
        border-radius: 0.25rem;
        background-color: #dce1de;
    }
</style>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">

<div class="container">
    <h2 class="text-center mt-4">How many players?</h2>
    <div class="row gap-small">
        
        @for (int i = 0; i < Game.players.Count; i++)
        {
            int playerIndex = i;
            Player player = Game.players[playerIndex];
            int maxChip = player.chip;
            <div class="col-12">
                <div class="row alert alert-secondary align-items-center py-4 px-0">
                    <div class="col-sm-auto text-sm-center">
                        <h4><strong>@player.name</strong></h4>
                        <h5>Chips: @player.chip</h5>
                    </div>
                    <div class="col-sm-4 max-width-100">
                        <div class="row align-items-center">
                            <span>$@bets[playerIndex]</span>
                            <input type="range" step="1" min="1" max="@(maxChip)" value="1"
                                   @onchange="e => UpdateBet(e, playerIndex)">
                        </div>

                    </div>

                </div>

            </div>
        }
    </div>
    <div class="row">
        <div class="col">
            <hr />
        </div>
    </div>
    <h4 class="text-center">Total Amount in Pot: $@(pot)</h4>
    <div class="row justify-content-center">
          <button class="btn btn-primary mt-4 mb-lg-5">START</button>
    </div>
</div>
    @inject NavigationManager NavigationManager


    @code {
        public static int[] bets = new int[Game.players.Count];


        int pot = 0;

        private void UpdateBet(ChangeEventArgs e, int playerIndex)
        {
            pot = 0;
            int bet = int.Parse(e.Value.ToString());
            Player player = Game.players[playerIndex];

            bets[playerIndex] = bet;

            for (int i = 0; i < bets.Length; i++)
            {
                pot += bets[i];
            }

        }
    }
